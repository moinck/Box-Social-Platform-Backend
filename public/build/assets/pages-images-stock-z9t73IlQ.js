$(function(){$(document).on("click","#save-image-data-btn",function(){var t=$("#custom_tag_name").val();if(t.length==0){toastr.error("Please enter tag name.");return}const e=$("#stock_images_management")[0],o=new FormData(e);o.append("custom_tag_name",t),$.ajax({type:"POST",url:"image-management/store",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:o,processData:!1,dataType:"json",contentType:!1,beforeSend:function(){showBSPLoader()},complete:function(){hideBSPLoader()},success:function(a){a.success?($(".search-image-checkbox").prop("checked",!1),$("#saved-img-count").text(a.savedImagesCount),$(".save_select_images").addClass("d-none"),$("#save-data-modal").modal("hide"),showSweetAlert("success","Store!","Your image has been successfully saved to your design template!.")):showSweetAlert("error","Info!","Please select 1 image.")},error:function(a,r,s){hideBSPLoader(),console.log(a.responseText),a.status==422?showSweetAlert("error","Oops!",a.responseJSON.message):showSweetAlert("error","Oops!","Something went wrong.")}})}),$(document).on("click","#nextButton",function(t){t.preventDefault();var e=$("#select2Icons").val();if(e.length==0){toastr.error("Please select 1 topic to search images.");return}var o=parseInt($("#total_page").val())+parseInt(1);$("#total_page").val(o),i()}),$(document).on("click","#previousButton",function(t){t.preventDefault();var e=$("#select2Icons").val();if(e.length==0){toastr.error("Please select 1 topic to search images.");return}var o=parseInt($("#total_page").val())-parseInt(1);$("#total_page").val(o),i()});function i(){$.ajax({type:"POST",url:"get-image-management",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{type:$("#select2Icons").val(),page:$("#total_page").val(),api_type:$("#api_type").val()},beforeSend:function(){showBSPLoader()},complete:function(){hideBSPLoader()},success:function(t){if(!t.success){showSweetAlert("error","Error",t.message);return}var e=t.data,o=0;if($("#api_type").val()=="pexels"?(o=e.photos?e.photos.length:0,e=e.photos):(o=e.hits?e.hits.length:0,e=e.hits),o==0){showSweetAlert("info","Oops!","No images were found. Try a different search.");return}var a="";$.each(e,function(r,s){var c="",n="";$("#api_type").val()=="pexels"?(c=s.src.large,n=s.id):(c=s.largeImageURL,n=s.id),r%25===0&&(a+=`
                            <div class="col-lg-3">
                        `),a+=`
                            <div class="col-md mb-md-0 mb-5">
                                <div class="form-check custom-option custom-option-image custom-option-image-check">
                                    <input class="form-check-input search-image-checkbox" type="checkbox" name="selectImages[]" id="search-image-${n}" value="${c}"/>
                                    <label class="form-check-label custom-option-content" for="search-image-${n}">
                                    <span class="custom-option-body">
                                        <img src="${c}" alt="cbImg" />
                                    </span>
                                    </label>
                                </div>
                            </div>
                    `,r%25===24&&(a+=`
                            </div>
                        `)}),$("#sortable-cards").html(a)},error:function(t){hideBSPLoader(),console.log(t)}})}$(document).on("click",".search_btn",function(t){t.preventDefault();var e=$("#select2Icons").val();if(e.length==0){toastr.options={progressBar:!0},toastr.error("Please select 1 topic to search images.");return}$("#total_page").val(1),i()});var l=function(t){return function(o,a){var r,s;r=[],s=new RegExp(o,"i"),$.each(t,function(c,n){s.test(n)&&r.push(n)}),a(r)}},p=["first time buyer mortgages","happy young person with door key","happy young couple standing outside house","holding door key","happy person with thumbs up","confused person","person with question mark","remortgage","piggy bank","save money","savings","clock","times up","time is now","mortgage broker","happy person or couple with thumbs up","move home","moving home","for sale sign outside house","life insurance","critical illness","health","family protection","income protection","protect income","protect house","protect family","national day","protect home","home insurance","accidents in the home","bad credit","poor credit","credit score","happy person with thumbs up","confused person","person with question mark","sad person","business owner","self employed","boss","manager","company accounts","hmrc","tax return","happy middle-aged person with thumbs up","key workers","nurses","doctors","uk police","uk firefighters","uk military","armed forces","right to buy","happy couple over 60 years old"];isRtl&&$(".typeahead-search").attr("dir","rtl"),$(".typeahead-search").typeahead({hint:!isRtl,highlight:!0,minLength:1},{name:"searchTopics",source:l(p)})});
